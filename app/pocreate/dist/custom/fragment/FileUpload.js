sap.ui.define(["sap/m/MessageBox"],function(e){"use strict";var t,a,n;async function r(e){var t={url:e.getUrl(),method:"GET",xhrFields:{responseType:"blob"}};return new Promise((e,a)=>{$.ajax(t).done((t,a,n)=>{e(t)}).fail(e=>{a(e)})})}async function o(e,t){var n=`/pocreation/Purchase_Attachment(${t})/content`;e.setUploadUrl(n);a.setHttpRequestMethod("PUT");a.uploadItem(e)}async function i(e){var t={mediaType:e.getMediaType(),fileName:e.getFileName(),size:e.getFileObject().size};var a={url:"/pocreation/Purchase_Attachment",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify(t)};return new Promise((e,t)=>{$.ajax(a).done((t,a,n)=>{e(t.ID)}).fail(e=>{t(e)})})}return{onAfterItemAdded:async function(e){a=e.getSource();var t=e.getParameter("item");var n=await i(t);await o(t,n)},onUploadCompleted:function(e){a.removeAllIncompleteItems();a.getBinding("items").refresh()},onOpenPressed:async function(e){e.preventDefault();var t=e.getSource();var a=t.getFileName();var n=await r(t);var o=window.URL.createObjectURL(n);var i=document.createElement("a");i.href=o;i.setAttribute("download",a);document.body.appendChild(i);i.click();document.body.removeChild(i)}}});